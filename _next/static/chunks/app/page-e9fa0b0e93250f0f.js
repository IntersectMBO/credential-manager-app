(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[16,974],{78208:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=78208,e.exports=t},47790:()=>{},73776:()=>{},72016:()=>{},79368:()=>{},8460:()=>{},92382:()=>{},77667:()=>{},76447:()=>{},68519:(e,t,n)=>{Promise.resolve().then(n.bind(n,38152))},92464:(e,t,n)=>{"use strict";n.a(e,async(e,o)=>{try{n.d(t,{v:()=>I});var s=n(95155),i=n(12115),l=n(50059),a=n(24683),r=n(38412),d=n(68998),c=n(94043),u=n(80767),h=n(10810),g=n(12406),x=n(47335),f=n(2432),v=n(18786),p=n(48983),j=n(93636),b=n(25169),A=n.n(b),m=n(16956),y=n.n(m),w=n(87358),C=n(75927).Buffer,_=e([l,a,j]);[l,a,j]=_.then?(await _)():_,y().config();let S=w.env.NEXT_PUBLIC_REST_IPFS_GATEWAY,k=e=>{try{var t;let n=j.ZXm.from_hex(e);return console.log("signers list",null===(t=n.body().required_signers())||void 0===t?void 0:t.to_json()),n}catch(e){return console.error("Error decoding transaction:",e),null}},W=(e,t)=>{let o=n(40177),s=t.toString(16).padStart(2,"0");return o.encode("gov_action",C.from(e+s,"hex")).toString()},I=()=>{let[e,t]=(0,i.useState)(""),[n,o]=(0,i.useState)(""),[j,b]=(0,i.useState)(null),{wallet:m,connected:y,name:w,connect:C,disconnect:_}=(0,l.vT)(),[I,T]=(0,i.useState)(""),[E,D]=(0,i.useState)(!1),[N,H]=(0,i.useState)(!1),[P,O]=(0,i.useState)(!0),[L,R]=(0,i.useState)(!1),[q,M]=(0,i.useState)(!1),[U,V]=(0,i.useState)(!1),[Y,B]=(0,i.useState)(),[K,F]=(0,i.useState)(),[G,X]=(0,i.useState)(),[z,J]=(0,i.useState)(),[Z,Q]=(0,i.useState)(),$=async()=>{if(!y){D(!1),H(!1),O(!0),R(!1),M(!1),V(!1),B(""),F(""),t("Please connect your wallet first.");return}let e=await m.getNetworkId();console.log("Connected wallet network ID:",e),console.log("isPartOfSigners:",E);let o=k(n);b(o),console.log("unsignedTransaction:",o);let s=await m.getChangeAddress(),i=(0,a.AP)(s).stakeCredentialHash;console.log("Stake Credential:",i);let l=null==o?void 0:o.body(),r=null==l?void 0:l.to_js_value().voting_procedures;try{var d,c,u,h;let t;if(!l)throw Error("Transaction body is null.");let n=l.required_signers();n&&0!==n.len()?(null==n?void 0:n.to_json().includes(i))&&(console.log("Required signers in the transaction:",null==n?void 0:n.to_json()),D(!0)):console.log("No required signers in the transaction.");let o=null==r?void 0:null===(d=r[0])||void 0===d?void 0:d.votes,s=null==o?void 0:o.length;if(o&&1===s)H(!0),F(W(o[0].action_id.transaction_id,o[0].action_id.index)),J(null===(u=o[0].voting_procedure.anchor)||void 0===u?void 0:u.anchor_url),Q(null===(h=o[0].voting_procedure.anchor)||void 0===h?void 0:h.anchor_data_hash),console.log("Transaction has one vote set to:",Y),(null==o?void 0:o[0].voting_procedure.vote)==="Yes"?B("Constitutional"):(null==o?void 0:o[0].voting_procedure.vote)==="No"?B("Unconstitutional"):B("Abstain");else if(!s)throw Error("Transaction has no votes.");let a=null==l?void 0:l.certs();console.log("certificates:",a),a||(console.log("No certificates in the transaction."),O(!1));let g=l.outputs().get(0).address().to_bech32().startsWith("addr_test1")?0:1;console.log("transactionNetwork:",g),e===g&&R(!0);let x=null==r?void 0:null===(c=r[0])||void 0===c?void 0:c.voter;console.log("voterJSON:",x),x&&void 0!==x.ConstitutionalCommitteeHotCred&&(t=x.ConstitutionalCommitteeHotCred.Script,console.log("ConstitutionalCommitteeHotCred Script:",t)),0===e&&"4f00984fa72e265b8ff8ffce4405da562cd3d6b16a4a38de3372eeea"===t?(console.log("Intersect CC Credential found in testnet"),M(!0)):1===e&&"85c47dd4b9a2e70e88965d91dd69be182d5605b23bb5250b1c94bf64"===t?(console.log("Intersect CC Credential found in mainnet"),M(!0)):console.error("Incorrect Intersect CC Credentials");let f=null==l?void 0:l.outputs().to_js_value();if(console.log("plutusScripts:",f),console.log("stakeCred:",i),Array.isArray(f)&&i){let e=new RegExp(i);f.forEach((t,n)=>{if(t.plutus_data&&"object"==typeof t.plutus_data&&"Data"in t.plutus_data){let n=t.plutus_data.Data;console.log("plutusData:",n),e.test(n)&&(console.log("Stake credential found in output for address ".concat(t.address)),V(!0))}else t.plutus_data?console.log("Stake credential not found on plutus script data for address ".concat(t.address)):console.log("No plutus data found in output")})}else console.error("Transaction outputs are not available ");0===g?X("https://preprod.cardanoscan.io/govAction/"):1===g&&X("https://cardanoscan.io/govAction/")}catch(e){console.error("Error validating transaction:",e)}},ee=async()=>{console.log("isPartOfSigners:",E);try{if(E){var e,o,s,i;let t=await m.signTx(n,!0);console.log("Transaction signed successfully:",t);let l=await k(t);T((null==l?void 0:null===(s=l.witness_set().vkeys())||void 0===s?void 0:null===(o=s.get(0))||void 0===o?void 0:null===(e=o.signature())||void 0===e?void 0:e.to_hex())||""),console.log("signature:",null==l?void 0:null===(i=l.witness_set().vkeys())||void 0===i?void 0:i.get(0).signature().to_hex())}else throw Error("You are not part of the required signers.")}catch(e){console.error("Error signing transaction:",e),t("Transaction signing failed. "+e)}};return(0,i.useEffect)(()=>{if(I||j){let e=document.getElementById("sign-transaction"),t=document.getElementById("signature");t?t.scrollIntoView({behavior:"smooth"}):e&&e.scrollIntoView({behavior:"smooth"})}},[I,j]),(0,s.jsxs)(r.A,{maxWidth:"md",sx:{mt:4},children:[(0,s.jsxs)(d.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,s.jsx)(c.A,{type:"string",label:"Enter Hex Encoded Transaction",variant:"outlined",fullWidth:!0,value:n,onChange:e=>{o(e.target.value),D(!1),H(!1),O(!0),R(!1),M(!1),V(!1),B(""),F("")}}),(0,s.jsx)(u.A,{variant:"contained",color:"success",onClick:$,sx:{whiteSpace:"nowrap",px:3},children:"Check Transaction"})]}),(0,s.jsxs)(d.A,{sx:{mt:3},children:[(0,s.jsx)(h.A,{variant:"h6",sx:{mb:2},children:"Transaction Details"}),j&&(0,s.jsxs)(d.A,{display:"flex",flexWrap:"wrap",gap:2,children:[(0,s.jsxs)(h.A,{display:"flex",flexDirection:"column",width:"45%",variant:"body1",fontWeight:"bold",children:["Wallet needs to sign?:",E?"✅":"❌"]}),(0,s.jsxs)(h.A,{display:"flex",flexDirection:"column",width:"45%",variant:"body1",fontWeight:"bold",children:["Signing one vote?:",N?"✅":"❌"]}),(0,s.jsxs)(h.A,{display:"flex",flexDirection:"column",width:"45%",variant:"body1",fontWeight:"bold",children:["Has no certificates?:",P?"❌":"✅"]}),(0,s.jsxs)(h.A,{display:"flex",flexDirection:"column",width:"45%",variant:"body1",fontWeight:"bold",children:["Is the transaction in the same network?:",L?"✅":"❌"]}),(0,s.jsxs)(h.A,{display:"flex",flexDirection:"column",width:"45%",variant:"body1",fontWeight:"bold",children:["Has Intersect CC credentials?:",q?"✅":"❌"]}),(0,s.jsxs)(h.A,{display:"flex",flexDirection:"column",width:"45%",variant:"body1",fontWeight:"bold",children:["Is stake credential in plutus data?:",U?"✅":"❌"]})]}),(0,s.jsx)(h.A,{variant:"h6",sx:{mt:3},children:"Voting Details"}),j&&(0,s.jsx)(g.A,{sx:{mb:3},children:(0,s.jsx)(x.A,{sx:{mt:3},children:(0,s.jsxs)(f.A,{children:[(0,s.jsxs)(v.A,{children:[(0,s.jsxs)(p.A,{sx:{fontWeight:"bold"},children:["Governance Action ID"," "]}),(0,s.jsx)(p.A,{children:(0,s.jsx)("a",{href:"".concat(G).concat(K),target:"_blank",children:K})})]}),(0,s.jsxs)(v.A,{children:[(0,s.jsxs)(p.A,{sx:{fontWeight:"bold"},children:["Vote Choice"," "]}),(0,s.jsx)(p.A,{children:Y})]}),(0,s.jsxs)(v.A,{children:[(0,s.jsx)(p.A,{sx:{fontWeight:"bold"},children:"Metadata Anchor URL"}),(0,s.jsx)(p.A,{children:(0,s.jsx)("a",{href:(null==z?void 0:z.startsWith("https://"))||(null==z?void 0:z.startsWith("http://"))?z:(null==z?void 0:z.startsWith("ipfs"))?"https://"+S+(null==z?void 0:z.slice(7)):"https://"+z,target:"_blank",style:{color:"blue",textDecoration:"underline"},children:z})})]}),(0,s.jsxs)(v.A,{children:[(0,s.jsx)(p.A,{sx:{fontWeight:"bold"},children:"Metadata Anchor Hash"}),(0,s.jsx)(p.A,{children:Z})]})]})})}),(0,s.jsx)(d.A,{sx:{backgroundColor:"#f5f5f5",padding:2,borderRadius:1,maxHeight:"400px",overflowY:"auto",marginTop:2,boxShadow:1},children:n&&(0,s.jsx)(A(),{data:j?j.to_json():{}})})]}),(0,s.jsx)(d.A,{sx:{display:"flex",justifyContent:"flex-end",mt:3},children:(0,s.jsx)(u.A,{id:"sign-transaction",variant:"contained",color:"success",onClick:ee,sx:{whiteSpace:"nowrap",px:3},children:"Sign Transaction"})}),I&&(0,s.jsxs)(d.A,{id:"signature",sx:{mt:3},children:[(0,s.jsx)(h.A,{variant:"h6",children:"Signature"}),(0,s.jsx)(d.A,{sx:{backgroundColor:"#e8f5e9",padding:2,borderRadius:1,whiteSpace:"pre-wrap",wordWrap:"break-word",boxShadow:2,maxHeight:"250px",overflowY:"auto"},onClick:()=>{navigator.clipboard.writeText(I),t("Signature copied to clipboard!")},children:(0,s.jsx)(h.A,{component:"pre",children:I})})]}),e&&(0,s.jsx)(h.A,{variant:"body1",color:"error",sx:{mt:2},children:e})]})};o()}catch(e){o(e)}})},57363:(e,t,n)=>{"use strict";n.a(e,async(e,o)=>{try{n.d(t,{u:()=>f});var s=n(95155),i=n(12115);n(19324),n(33222);var l=n(50059),a=n(24683),r=n(38412),d=n(12406),c=n(47335),u=n(2432),h=n(18786),g=n(48983),x=e([l,a]);[l,a]=x.then?(await x)():x;let f=()=>{let[e,t]=(0,i.useState)(null),[o,x]=(0,i.useState)(null),[f,v]=(0,i.useState)(null),[p,j]=(0,i.useState)(null);return((0,i.useEffect)(()=>{(async()=>{try{let{CardanoWallet:e}=await Promise.resolve().then(n.bind(n,50059));t(()=>e)}catch(e){console.error("Error importing MeshProvider:",e)}})()},[]),null===e)?(0,s.jsx)("div",{className:"wallet-container",children:"Loading..."}):(0,s.jsxs)(r.A,{maxWidth:"md",children:[(0,s.jsx)("div",{className:"wallet-container",style:{display:"flex",flexDirection:"column",alignItems:"center"},children:(0,s.jsx)(()=>{let{wallet:t,connected:n,name:r,connect:d,disconnect:c,error:u}=(0,l.vT)();return(0,i.useEffect)(()=>{(async()=>{if(n){console.log("Wallet connected:",r);let e=await t.getRegisteredPubStakeKeys();console.log("Public key:",e);let n=await t.getChangeAddress(),s=await t.getNetworkId();x((0,a.AP)(n).pubKeyHash),v((0,a.AP)(n).stakeCredentialHash),j(0===s?"Testnet":1===s?"Mainnet":"unknown"),console.log("Payment Credential:",o),console.log("Stake Credential:",f)}else console.log("Wallet not connected."),x(null),v(null),j(null)})()},[t,n,r]),(0,s.jsx)(e,{})},{})}),(0,s.jsx)(d.A,{sx:{mb:3},children:(0,s.jsx)(c.A,{children:(0,s.jsxs)(u.A,{children:[(0,s.jsxs)(h.A,{children:[(0,s.jsx)(g.A,{sx:{fontWeight:"bold"},children:"Voter Key Hash"}),(0,s.jsx)(g.A,{children:f||"Not Available"})]}),(0,s.jsxs)(h.A,{children:[(0,s.jsx)(g.A,{sx:{fontWeight:"bold"},children:"Wallet Network"}),(0,s.jsx)(g.A,{children:p||"Not Available"})]})]})})})]})};o()}catch(e){o(e)}})},38152:(e,t,n)=>{"use strict";n.a(e,async(e,o)=>{try{n.r(t),n.d(t,{default:()=>h});var s=n(95155),i=n(57363),l=n(92464),a=n(68998),r=n(38412),d=n(10810),c=n(5565),u=e([i,l]);function h(){return(0,s.jsx)(a.A,{sx:{backgroundImage:"url(/background.png)",backgroundSize:"cover",backgroundPosition:"center",minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"flex-start",padding:2},children:(0,s.jsxs)(r.A,{maxWidth:"md",sx:{display:"flex",backgroundColor:"white",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",minHeight:"100vh",padding:2},children:[(0,s.jsx)(a.A,{sx:{width:"100%",backgroundColor:"blue",marginTop:"20px",padding:"15px 0 15px 0",display:"flex",alignItems:"center",justifyContent:"flex-start"},children:(0,s.jsx)(c.default,{src:"/images/Logo.svg",alt:"Logo",width:100,height:100,style:{paddingLeft:10}})}),(0,s.jsx)(d.A,{variant:"h4",component:"h1",fontWeight:"bold",textTransform:"uppercase",mb:3,textAlign:"center",paddingTop:2,children:"Intersect Council Toolkit"}),(0,s.jsxs)(a.A,{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",children:[(0,s.jsx)(i.u,{}),(0,s.jsx)(l.v,{})]})]})})}[i,l]=u.then?(await u)():u,o()}catch(e){o(e)}})},19324:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[595,90,581,965,105,268,127,486,52,438,441,517,358],()=>t(68519)),_N_E=e.O()}]);